apply plugin: 'java'
apply plugin: 'org.labkey.testRunner'

import org.labkey.gradle.util.BuildUtils

project.dependencies {
    compile "com.github.lookfirst:sardine:${project.lookfirstSardineVersion}"
    compile "javax.xml.bind:jaxb-api:${jaxbVersion}"
    compile "com.sun.xml.bind:jaxb-impl:${jaxbVersion}"
    compile "com.sun.xml.bind:jaxb-core:${jaxbVersion}"
    compile "org.bouncycastle:bcpg-jdk15on:${bouncycastleVersion}"
    // 36184: Tests can't find selenium-ie-driver library when running on Windows on TeamCity
    // Workaround to ensure that the class-loader finds InternetExplorerDriver
    compile "org.seleniumhq.selenium:selenium-ie-driver:${seleniumVersion}"
}

if (project.findProject(":remoteapi:labkey-api-jdbc") != null)
{
    BuildUtils.addLabKeyDependency(project: project, config: "compile", depProjectPath: ":remoteapi:labkey-api-jdbc")
}

if (project.hasProperty("teamcity"))
{
    sourceSets {
        debug {
            java {
                srcDirs = ['src/org/labkey/test/debug']
            }
        }
    }

    dependencies {
        debugCompile files("${System.properties['java.home']}/../lib/tools.jar")
    }

   // This plugin depends on the debugClasses task for ensureShutdown used on TeamCity
   apply plugin: 'org.labkey.teamCity'
}
